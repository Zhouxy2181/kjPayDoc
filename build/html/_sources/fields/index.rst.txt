报文字段说明
==============


符号约定
---------

+------------+------------------------------------+
|    符号    |            含义                    |
+-----+------+------------------------------------+
|     |  M   | 必须填写的域                       |
|     +------+------------------------------------+
|     |  C   | 某条件成立时必须填写的域           |
| 数  +------+------------------------------------+
| 据  |  C+  | 某条件成立时增加的域               |
| 元  +------+------------------------------------+
| 数  |  C-  | 某条件成立时删除的域               |
| 值  +------+------------------------------------+
| 符  |  M+  | 必须增加的域                       |
| 号  +------+------------------------------------+
|     |  O   | 受理方和发卡方自选填写域           |
|     +------+------------------------------------+
|     |  ->  | 转发域                             |
|     +------+------------------------------------+
|     |  R   | 必须与先前报文中对应域的值相同的域 |
+-----+------+------------------------------------+



字段长度的计算
---------------

 字段长度的计算说明：所有长度均按字节计算，中文算两个字节，英文、数字算一个字节。



字段类型定义
-------------

+-----------+-----------------------------------------------------+
| Ax	    |  x字节定长的字母字符                                |
+-----------+-----------------------------------------------------+
| Ax..y     |  长度为x-y字节的变长字母字符                        |
+-----------+-----------------------------------------------------+
| ANx	    |  x字节定长的字母和/或数字字符                       |
+-----------+-----------------------------------------------------+
| Anx..y    |  长度为x-y字节的变长字母和/或数字字符               |
+-----------+-----------------------------------------------------+
| ANSx      |  x字节定长的字母、数字和/或特殊符号字符             |
+-----------+-----------------------------------------------------+
| ANSx..y   |  长度为x-y字节的变长字母、数字和/或特殊符号字符     |
+-----------+-----------------------------------------------------+
| Asx	    |  x字节定长的字母和/或特殊符号字符                   |
+-----------+-----------------------------------------------------+
| Asx..y    |  长度为x-y字节的变长字母和/或特殊符号字符           |
+-----------+-----------------------------------------------------+
| Nx	    |  x字节定长的整型数值，若表示金额，则以分为单位      |
+-----------+-----------------------------------------------------+
| Nx..y     |  长度为x-y字节的整型数值，若表示金额，则以分为单位  |
+-----------+-----------------------------------------------------+
| NSx	    |  x字节定长的数字符和/或特殊字符                     |
+-----------+-----------------------------------------------------+
| NSx..y    |  长度为x-y字节的数字字符和/或特殊字符               |
+-----------+-----------------------------------------------------+
| Sx	    |  x字节定长的特殊符号字符                            |
+-----------+-----------------------------------------------------+
| Sx..y     |  长度为x-y字节的变长特殊符号字符                    |
+-----------+-----------------------------------------------------+
| ss	    |  秒                                                 |
+-----------+-----------------------------------------------------+
| DD	    |  日                                                 |
+-----------+-----------------------------------------------------+
| hh	    |  时                                                 |
+-----------+-----------------------------------------------------+
| MM	    |  月                                                 |
+-----------+-----------------------------------------------------+
| mm	    |  分                                                 |
+-----------+-----------------------------------------------------+
| YY        |  年（2字节）                                        |
+-----------+-----------------------------------------------------+
| YYYY      |  年（4字节)                                         |
+-----------+-----------------------------------------------------+



通信请求字段
------------

+-----------+----------------+----------------+----------------+-----------------------------------------------+
|**序号**   |  **数据名称**  |  **字段标识**  |  **字段格式**  |       **字段取值说明**                        |          
+===========+================+================+================+===============================================+          
|   1       |  签名          |  signature     |  ANS..1024     |  采用RSA私钥模数2048签名                      |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   2       |  版本号        |  version       |  NS2           |  1.0                                          |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   3       |  签名方式      |  signType      |  N2            |  01-SHA256withRSA                             |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+          
|   4       |  编码方式      |  encoding      |  ANS5          |  UTF-8                                        |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+          
|   5       |  交易代码      |  tranCode      |  N5            |  上送交易码（会员管理类/交易类）              |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   6       |  请求流水号    |  requestNo     |  ANS20..64     |  前端请求流水号，唯一不重复，                 |
|           |                |                |                |  涉及资金清算的交易以此作为交易键值           |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   7       |  请求发送时间  |  tranTime      |  N14           |  YYYYMMDDHHMMSS                               |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+          
|   8       |  接入机构      |  appId         |  ANS5..20      |  合作机构APPID                                |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+          
|   9       |  商户代码      |  merId         |  AN15          |  合作机构商户号                               |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+          
|   10      |  业务数据      |  bizData       |  ANS1..2048    |  业务报文接口JSON序列化以后，使用AES密        |
|           |                |                |                |  钥加密BASE64编码                             |  
+-----------+----------------+----------------+----------------+-----------------------------------------------+     



通信响应字段
---------------

+-----------+----------------+----------------+----------------+-----------------------------------------------+
|**序号**   |  **数据名称**  |  **字段标识**  |  **字段格式**  |       **字段取值说明**                        |          
+===========+================+================+================+===============================================+          
|   1       |  签名          |  signature     |  ANS..1024     |  采用RSA私钥模数2048签名                      |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   2       |  版本号        |  version       |  NS2           |  1.0                                          |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   3       |  签名方式      |  signType      |  N2            |  01-SHA256withRSA                             |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+          
|   4       |  编码方式      |  encoding      |  ANS5          |  UTF-8                                        |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+          
|   5       |  交易代码      |  tranCode      |  N5            |  上送交易码（会员管理类/交易类）              |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   6       |  请求流水号    |  requestNo     |  ANS20..64     |  前端请求流水号，唯一不重复，                 |
|           |                |                |                |  涉及资金清算的交易以此作为交易键值           |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   7       |  平台交易号    |  tradeNo       |  ANS20..64     |  立收平台流水号                               |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+          
|   8       |  响应时间      |  responseTime  |  N14           |  YYYYMMDDHHMMSS                               |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+          
|   9       |  接入机构      |  appId         |  ANS5..20      |  合作机构APPID                                |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+          
|   10      |  商户代码      |  merId         |  AN15          |  合作机构商户号                               |          
+-----------+----------------+----------------+----------------+-----------------------------------------------+          
|   10      |  业务数据      |  bizData       |  ANS1..2048    |  业务报文接口JSON序列化以后，使用AES密        |
|           |                |                |                |  钥加密BASE64编码                             |  
+-----------+----------------+----------------+----------------+-----------------------------------------------+     



业务数据字段
-------------

+-----------+----------------+----------------+----------------+-----------------------------------------------+
|**序号**   |  **数据名称**  |  **字段标识**  |  **字段格式**  |       **字段取值说明**                        |          
+===========+================+================+================+===============================================+    
|   1       |   产品代码     |   prodCode     |   N4           |    产品代码                                   |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   2       |  异步回调地址  |   noitfyURL    |   ANS1..256    |    异步回调地址（入网、支付、结算）           |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   3       |  前台跳转地址  |   forwardURL   |   ANS1..256    |    前台页面跳转地址                           |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   4       |  原流水号      |   origRequestNo|   ANS20..64    |                                               |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   5       |  手机号        |   phoneNo      |   N11          |    手机号                                     |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   6       |  短信模板ID    |   smsTempId    |   AN10         |    短信模板ID                                 |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   7       |  验证码        |   smsCode      |   N6           |    短信验证码                                 |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   8       |  交易币种      |   currencyCode |   AN3          |    156 人民币                                 |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   9       |  卡类型        |   cardType     |   N2           |    - 00：贷记卡                               |
|           |                |                |                |    - 01：借记卡                               |
|           |                |                |                |    - 02：准贷记卡                             |
|           |                |                |                |    - 03：预付费卡                             |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   10      |  立收会员号    |   userId       |   ANS1..196    |    立收会员号                                 |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   11      |  会员姓名      |   userName     |   ANS1..30     |    会员姓名                                   |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   12      |  会员状态      |   userStatus   |   N11          |    - AC_INIT 初始化                           |
|           |                |                |                |    - AC_PROC 处理中                           |
|           |                |                |                |    - AC_FAIL 校验失败                         |
|           |                |                |                |    -  AC_NORMAL 正常                          |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   13      |  合作机构会员号|   extUserId    |   ANS1..19     |    合作机构会员号                             |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   14      |  发卡机构代码  |   issCode      |   AN1..11      |    发卡机构代码                               |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   15      |  开户行省      |   issProvince  |   ANS1..30     |    发卡行省                                   |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   16      |  开户行市      |   issCity      |   ANS1..30     |    发卡行市                                   |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   17      |  开户行名称    |   issName      |  ANS1..60      |    发卡机构名称                               |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   18      |  预留手机号    |   bankPhoneNo  |  ANS1..30      |    银行预留手机号                             |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     19    |    结算账号    |   bankPhoneNo  |   ANS1..30     |  结算账号                                     |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     20    |    交易金额    |   amount       |   N1..12       |  单位为分                                     |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     21    |    交易币种    |   currencyCode |   AN3          |   156 人民币                                  |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     22    |    资质类型    |   imgType      |   N2           |   - 01-身份证正面照                           |
|           |                |                |                |   - 02-身份证反面照                           |
|           |                |                |                |   - 03-手持身份证人像照                       |
|           |                |                |                |   - 04-结算卡正面照                           |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     23    |    文件名      |    fileName    |   ANS1..64     |   文件名称                                    |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     24    |    文件内容    |   fileContent  |  ANS1..1000000 |   压缩Base64编码后的文件内容                  | 
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     25    |    文件ID      |    fileId      |   ANS1..64     |   立收平台唯一文件ID                          |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     26    |    证件类型    |   certifTp     |   N2           |   - 01：身份证                                |
|           |                |                |                |   - 02：军官证                                |
|           |                |                |                |   - 03：护照                                  |
|           |                |                |                |   - 04：港澳证                                |
|           |                |                |                |   - 05：台胞证                                |
|           |                |                |                |   - 06：警官证                                |
|           |                |                |                |   - 07：士兵证                                |
|           |                |                |                |   - 12：港澳居民居住证                        |
|           |                |                |                |   - 13：台湾居民居住证                        |
|           |                |                |                |   - 99：其它证件                              |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     27    |    证件号码    |   certifId     |   ANS15.18     |    证件号码                                   |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     28    |    证件生效日期|   certifBegin   |  N8           |    YYYYMMDD                                   |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     29    |    证件失效日期|   certifEnd     |  N8           |    YYYYMMDD                                   |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     30    |    终端号      |   termId       |   ANS8         |                                               |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     31    |  原交易应答码  |   origRespCode |   N4           |    查询返回标识原交易状态                     |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     32    |  原交易应答信息|  origRespMsg   |  ANS1..256     |                                               |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     33    |    应答码      |   respCode     |   N4           |    应答码                                     |  
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     34    |    应答信息    |  respMsg       |  ANS1..256     |    应答信息                                   |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     35    |    风控信息域  |  riskInfo      |   ANS 1…4096   |    JSON对象序列化                             |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     36    |    订单描述    |  orderDesc     |  ANS1..32      |   订单描述信息                                |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     37    |  身份证-正面ID |certifFrontPicId|  ANS1..64      |    文件id                                     |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     38    |  身份证-背面ID | certifBackPicId|  ANS1..64      |    文件id                                     |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     39    |  手持身份证ID  | ceritfHandPicId|  ANS1..64      |    文件id                                     |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     40    |    结算卡ID    |  acctPicId     |  ANS1..64      |    文件id                                     |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|     41    |  产品费率信息  |  prodFeeInfo   |  ANS1..2048    |    该域为JSON数组对象，格式见下表             |
+-----------+----------------+----------------+----------------+-----------------------------------------------+


+-----------+----------------+----------------+----------------+-----------------------------------------------+
|  序号     |    子域名      |     标  识     |    子域格式    |        说  明                                 |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   1       |    产品代码    |   prodCode     |    N4          |                                               |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   2       |    费率代码    |   feeID        |    ANS5        |       费率代码                                |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   3       |    费率模式    |   feeMode      |    N2          |       01-比例     02-固定                     |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   4       |    费率        |   feeRate      |    AN8         |        0.02345  =  2.345%                     |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   5       |    保底        |   feeMin       |   AN5          |        1.12 = 1.12元                          |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   6       |    封顶        |   feeMax       |   AN5          |        1.12 = 1.12元                          |
+-----------+----------------+----------------+----------------+-----------------------------------------------+
|   7       |    固定        |   feeFixed     |   AN5          |        1.12 = 1.12元                          |
+-----------+----------------+----------------+----------------+-----------------------------------------------+



示例如下

.. code:: json
  
  [{"prodCode":"P10","feeID":"F01","feeMode":"01","feeRate":"0.0425"}, 
  {"prodCode":"P10","feeID":"F02","feeMode":"01","feeRate":"0.0325","feeMin":"1","feeMax":"5"},
  {"prodCode":"P10","feeID":"F03","feeMode":"02","feeFixed":"3"}]
 
-  产品:P10  费率代码:F01  费率: 4.25%
-  产品:P10  费率代码:F02  费率: 3.25% 保底1元 封顶5元
-  产品:P10 费率代码:F03  固定:3元
-  产品综合计费等于三个费率代码分别用本金计算手续费后累加，即为产品手续费。


